import { Ionicons } from '@expo/vector-icons';
import { Tabs } from 'expo-router';
import React from 'react';
import { View } from 'react-native';
import Svg, { Path, Mask, G, Rect, Defs, LinearGradient, Stop } from 'react-native-svg';

// Custom SVG Components
const ShoeIcon = ({ focused, size = 28 }: { focused: boolean; size?: number }) => (
  <Svg width={size} height={size} viewBox="0 0 40 40" fill="none">
    <Mask id="mask0_38_942" maskUnits="userSpaceOnUse" x="0" y="0" width="40" height="40">
      <Rect width="40" height="40" fill="#D9D9D9"/>
    </Mask>
    <G mask="url(#mask0_38_942)">
      {focused ? (
        <>
          <Defs>
            <LinearGradient id="shoeGradient" x1="1.12008" y1="9.21065" x2="33.7379" y2="9.5109" gradientUnits="userSpaceOnUse">
              <Stop stopColor="#54F895"/>
              <Stop offset="1" stopColor="#2AFBEA"/>
            </LinearGradient>
          </Defs>
          <Path d="M6.0004 13.1112H0.611654C0.722765 12.6668 0.868598 12.2477 1.04915 11.8541C1.22971 11.4605 1.46346 11.0786 1.7504 10.7083L8.16707 2.12496C8.63929 1.48607 9.27124 1.06246 10.0629 0.854129C10.8546 0.645795 11.6115 0.736073 12.3337 1.12496L13.5004 1.7083C14.0837 2.01385 14.5351 2.43052 14.8546 2.9583C15.174 3.48607 15.3337 4.06941 15.3337 4.7083V8.2083L18.4171 7.41663C19.2504 7.19441 20.056 7.29857 20.8337 7.72913C21.6115 8.15968 22.1393 8.77774 22.4171 9.5833L25.1254 17.75L32.2087 24.8333C32.7643 25.3889 33.1462 25.9861 33.3546 26.625C33.5629 27.2639 33.6671 27.9444 33.6671 28.6666C33.6671 29.75 33.3615 30.7083 32.7504 31.5416C32.1393 32.375 31.3522 32.9676 30.3892 33.3195L11.5558 15.3195C10.7875 14.6065 9.92638 14.0601 8.97249 13.6804C8.01888 13.3009 7.02818 13.1112 6.0004 13.1112ZM20.5837 33.6666C19.7504 33.6666 18.9587 33.5139 18.2087 33.2083C17.4587 32.9027 16.7643 32.4722 16.1254 31.9166L2.58374 19.625C2.01901 19.1158 1.56999 18.5394 1.23665 17.8958C0.90332 17.2522 0.667209 16.5832 0.52832 15.8887H6.0004C6.67624 15.8887 7.33138 16.0137 7.96582 16.2637C8.59999 16.5137 9.16249 16.8748 9.65332 17.347L26.6808 33.6666H20.5837Z" fill="url(#shoeGradient)"/>
        </>
      ) : (
        <Path d="M9.00036 16.1112C10.0281 16.1112 11.0188 16.3009 11.9724 16.6804C12.9263 17.0601 13.7874 17.6065 14.5558 18.3195L30.8337 33.8887H31.667C32.2968 33.8887 32.8245 33.6758 33.2504 33.25C33.6762 32.8241 33.8891 32.2964 33.8891 31.6666C33.8891 31.3852 33.8626 31.0862 33.8095 30.7695C33.7562 30.4529 33.5698 30.1362 33.2504 29.8195L25.7087 22.2779L22.6116 13L19.0283 13.8887C18.1394 14.1109 17.3384 13.949 16.6254 13.4029C15.9123 12.8565 15.5558 12.125 15.5558 11.2083V7.34705L13.667 6.40288L6.66703 15.7916C6.62064 15.838 6.58355 15.8866 6.55578 15.9375C6.528 15.9883 6.49105 16.0462 6.44494 16.1112H9.00036ZM9.00036 18.8887H6.19494C6.27828 19.1573 6.39633 19.4044 6.54911 19.63C6.70189 19.8555 6.88008 20.0622 7.08369 20.25L20.9724 32.875C21.3336 33.2175 21.7363 33.472 22.1808 33.6387C22.6252 33.8054 23.0929 33.8887 23.5837 33.8887H26.8058L12.6533 20.347C12.1624 19.8748 11.6004 19.5137 10.967 19.2637C10.3334 19.0137 9.67786 18.8887 9.00036 18.8887ZM23.5837 36.6666C22.7504 36.6666 21.9587 36.5139 21.2087 36.2083C20.4587 35.9027 19.7642 35.4722 19.1254 34.9166L5.58369 22.625C4.30592 21.4583 3.59064 20.0277 3.43786 18.3333C3.28508 16.6389 3.72258 15.0972 4.75036 13.7083L11.167 5.12496C11.6392 4.48607 12.2712 4.06246 13.0629 3.85413C13.8545 3.6458 14.6115 3.73607 15.3337 4.12496L16.5004 4.7083C17.0837 5.01385 17.5351 5.43052 17.8545 5.9583C18.174 6.48607 18.3337 7.06941 18.3337 7.7083V11.2083L21.417 10.4166C22.2504 10.1944 23.0559 10.2986 23.8337 10.7291C24.6115 11.1597 25.1393 11.7777 25.417 12.5833L28.1254 20.75L35.2087 27.8333C35.7643 28.3889 36.1462 28.9861 36.3545 29.625C36.5629 30.2639 36.667 30.9444 36.667 31.6666C36.667 33.0555 36.1809 34.2361 35.2087 35.2083C34.2365 36.1805 33.0559 36.6666 31.667 36.6666H23.5837Z" fill="#FAFAF8"/>
      )}
    </G>
  </Svg>
);

const PeopleIcon = ({ focused, size = 24 }: { focused: boolean; size?: number }) => (
  <Svg width={size + 16} height={size + 16} viewBox="0 0 41 40" fill="none">
    <Mask id="mask0_38_937" maskUnits="userSpaceOnUse" x="0" y="0" width="41" height="40">
      <Rect x="0.143555" width="40" height="40" fill="#D9D9D9"/>
    </Mask>
    <G mask="url(#mask0_38_937)">
      {focused ? (
        <>
          <Defs>
            <LinearGradient id="peopleGradient" x1="0.85784" y1="15.1429" x2="40.2192" y2="15.8628" gradientUnits="userSpaceOnUse">
              <Stop stopColor="#54F895"/>
              <Stop offset="1" stopColor="#2AFBEA"/>
            </LinearGradient>
          </Defs>
          <Path d="M0.143555 30V27.6529C0.143555 26.5404 0.731471 25.635 1.9073 24.9367C3.08342 24.2381 4.62856 23.8888 6.54272 23.8888C6.88856 23.8888 7.22092 23.8957 7.5398 23.9096C7.85897 23.9235 8.17133 23.955 8.47689 24.0042C8.19911 24.52 7.99078 25.0493 7.85189 25.5921C7.713 26.1351 7.64355 26.7017 7.64355 27.2917V30H0.143555ZM10.1436 30V27.2917C10.1436 26.4028 10.3866 25.5903 10.8727 24.8542C11.3588 24.1181 12.0463 23.4722 12.9352 22.9167C13.8241 22.3611 14.8866 21.9444 16.1227 21.6667C17.3588 21.3889 18.6991 21.25 20.1436 21.25C21.6158 21.25 22.9699 21.3889 24.2061 21.6667C25.4422 21.9444 26.5047 22.3611 27.3936 22.9167C28.2824 23.4722 28.963 24.1181 29.4352 24.8542C29.9074 25.5903 30.1436 26.4028 30.1436 27.2917V30H10.1436ZM32.6436 30V27.2917C32.6436 26.6831 32.5811 26.1096 32.4561 25.5712C32.3311 25.0329 32.1343 24.5113 31.8656 24.0063C32.1712 23.9557 32.4806 23.9235 32.794 23.9096C33.1076 23.8957 33.4279 23.8888 33.7548 23.8888C35.6715 23.8888 37.2154 24.2315 38.3865 24.9171C39.5579 25.6026 40.1436 26.5146 40.1436 27.6529V30H32.6436ZM6.52022 22.5C5.68578 22.5 4.96994 22.2008 4.37272 21.6025C3.7755 21.0042 3.47689 20.2849 3.47689 19.4446C3.47689 18.5926 3.77605 17.8704 4.37439 17.2779C4.97272 16.6851 5.69203 16.3888 6.5323 16.3888C7.38425 16.3888 8.10647 16.6851 8.69897 17.2779C9.29175 17.8704 9.58814 18.5967 9.58814 19.4567C9.58814 20.2911 9.29175 21.0069 8.69897 21.6042C8.10647 22.2014 7.38022 22.5 6.52022 22.5ZM33.7427 22.5C32.908 22.5 32.192 22.2008 31.5948 21.6025C30.9976 21.0042 30.699 20.2849 30.699 19.4446C30.699 18.5926 30.9983 17.8704 31.5969 17.2779C32.1952 16.6851 32.9145 16.3888 33.7548 16.3888C34.6065 16.3888 35.3287 16.6851 35.9215 17.2779C36.514 17.8704 36.8102 18.5967 36.8102 19.4567C36.8102 20.2911 36.514 21.0069 35.9215 21.6042C35.3287 22.2014 34.6024 22.5 33.7427 22.5ZM20.1436 20C18.7547 20 17.5741 19.5139 16.6019 18.5417C15.6297 17.5694 15.1436 16.3889 15.1436 15C15.1436 13.5833 15.6297 12.3958 16.6019 11.4375C17.5741 10.4792 18.7547 10 20.1436 10C21.5602 10 22.7477 10.4792 23.7061 11.4375C24.6644 12.3958 25.1436 13.5833 25.1436 15C25.1436 16.3889 24.6644 17.5694 23.7061 18.5417C22.7477 19.5139 21.5602 20 20.1436 20Z" fill="url(#peopleGradient)"/>
        </>
      ) : (
        <Path d="M0.143555 30V27.6529C0.143555 26.5404 0.731471 25.635 1.9073 24.9367C3.08342 24.2381 4.62856 23.8888 6.54272 23.8888C6.88856 23.8888 7.22092 23.8957 7.5398 23.9096C7.85897 23.9235 8.17133 23.955 8.47689 24.0042C8.19911 24.52 7.99078 25.0493 7.85189 25.5921C7.713 26.1351 7.64355 26.7017 7.64355 27.2917V30H0.143555ZM10.1436 30V27.2917C10.1436 26.4028 10.3866 25.5903 10.8727 24.8542C11.3588 24.1181 12.0463 23.4722 12.9352 22.9167C13.8241 22.3611 14.8866 21.9444 16.1227 21.6667C17.3588 21.3889 18.6991 21.25 20.1436 21.25C21.6158 21.25 22.9699 21.3889 24.2061 21.6667C25.4422 21.9444 26.5047 22.3611 27.3936 22.9167C28.2824 23.4722 28.963 24.1181 29.4352 24.8542C29.9074 25.5903 30.1436 26.4028 30.1436 27.2917V30H10.1436ZM32.6436 30V27.2917C32.6436 26.6831 32.5811 26.1096 32.4561 25.5712C32.3311 25.0329 32.1343 24.5113 31.8656 24.0063C32.1712 23.9557 32.4806 23.9235 32.794 23.9096C33.1076 23.8957 33.4279 23.8888 33.7548 23.8888C35.6715 23.8888 37.2154 24.2315 38.3865 24.9171C39.5579 25.6026 40.1436 26.5146 40.1436 27.6529V30H32.6436ZM12.9906 27.2221H27.3102V27.0554C27.2177 26.1851 26.4931 25.4629 25.1365 24.8888C23.7801 24.3149 22.1158 24.0279 20.1436 24.0279C18.1713 24.0279 16.507 24.3149 15.1506 24.8888C13.794 25.4629 13.074 26.1944 12.9906 27.0833V27.2221ZM6.52022 22.5C5.68578 22.5 4.96994 22.2008 4.37272 21.6025C3.7755 21.0042 3.47689 20.2849 3.47689 19.4446C3.47689 18.5926 3.77605 17.8704 4.37439 17.2779C4.97272 16.6851 5.69203 16.3888 6.5323 16.3888C7.38425 16.3888 8.10647 16.6851 8.69897 17.2779C9.29175 17.8704 9.58814 18.5967 9.58814 19.4567C9.58814 20.2911 9.29175 21.0069 8.69897 21.6042C8.10647 22.2014 7.38022 22.5 6.52022 22.5ZM33.7427 22.5C32.908 22.5 32.192 22.2008 31.5948 21.6025C30.9976 21.0042 30.699 20.2849 30.699 19.4446C30.699 18.5926 30.9983 17.8704 31.5969 17.2779C32.1952 16.6851 32.9145 16.3888 33.7548 16.3888C34.6065 16.3888 35.3287 16.6851 35.9215 17.2779C36.514 17.8704 36.8102 18.5967 36.8102 19.4567C36.8102 20.2911 36.514 21.0069 35.9215 21.6042C35.3287 22.2014 34.6024 22.5 33.7427 22.5ZM20.1436 20C18.7547 20 17.5741 19.5139 16.6019 18.5417C15.6297 17.5694 15.1436 16.3889 15.1436 15C15.1436 13.5833 15.6297 12.3958 16.6019 11.4375C17.5741 10.4792 18.7547 10 20.1436 10C21.5602 10 22.7477 10.4792 23.7061 11.4375C24.6644 12.3958 25.1436 13.5833 25.1436 15C25.1436 16.3889 24.6644 17.5694 23.7061 18.5417C22.7477 19.5139 21.5602 20 20.1436 20ZM20.1531 17.2221C20.7856 17.2221 21.3126 17.0082 21.734 16.5804C22.1551 16.1526 22.3656 15.6226 22.3656 14.9904C22.3656 14.3579 22.1537 13.831 21.7298 13.4096C21.3056 12.9885 20.7801 12.7779 20.1531 12.7779C19.5265 12.7779 18.9979 12.9899 18.5673 13.4137C18.1368 13.8379 17.9215 14.3635 17.9215 14.9904C17.9215 15.6171 18.1354 16.1457 18.5631 16.5763C18.9909 17.0068 19.5209 17.2221 20.1531 17.2221Z" fill="#FAFAF8"/>
      )}
    </G>
  </Svg>
);

const ImageIcon = ({ focused, size = 24 }: { focused: boolean; size?: number }) => (
  <Svg width={size + 16} height={size + 16} viewBox="0 0 41 40" fill="none">
    <Mask id="mask0_38_939" maskUnits="userSpaceOnUse" x="0" y="0" width="41" height="40">
      <Rect x="0.143555" width="40" height="40" fill="#D9D9D9"/>
    </Mask>
    <G mask="url(#mask0_38_939)">
      {focused ? (
        <>
          <Defs>
            <LinearGradient id="imageGradient" x1="5.67927" y1="12.7143" x2="35.2077" y2="12.9843" gradientUnits="userSpaceOnUse">
              <Stop stopColor="#54F895"/>
              <Stop offset="1" stopColor="#2AFBEA"/>
            </LinearGradient>
          </Defs>
          <Path d="M7.92147 35C7.17147 35 6.52092 34.7246 5.9698 34.1737C5.41897 33.6226 5.14355 32.9721 5.14355 32.2221V7.77792C5.14355 7.02792 5.41897 6.37736 5.9698 5.82625C6.52092 5.27542 7.17147 5 7.92147 5H24.2823C23.6898 5.68528 23.2454 6.45375 22.949 7.30542C22.6529 8.15736 22.5048 9.02778 22.5048 9.91667C22.5048 12.0556 23.257 13.8774 24.7615 15.3821C26.2662 16.8865 28.088 17.6388 30.2269 17.6388C31.1158 17.6388 31.9862 17.4907 32.8381 17.1946C33.6898 16.8982 34.4583 16.4537 35.1436 15.8612V32.2221C35.1436 32.9721 34.8681 33.6226 34.3173 34.1737C33.7662 34.7246 33.1156 35 32.3656 35H7.92147ZM10.1436 28.2779H30.1436L24.0602 20.1667L18.8656 27.0279L15.0048 21.9167L10.1436 28.2779ZM28.8381 14.8612V11.3333H25.2823V8.55542H28.8381V5H31.6156V8.55542H35.1436V11.3333H31.6156V14.8612H28.8381Z" fill="url(#imageGradient)"/>
        </>
      ) : (
        <Path d="M7.92147 35C7.17147 35 6.52092 34.7246 5.9698 34.1737C5.41897 33.6226 5.14355 32.9721 5.14355 32.2221V7.77792C5.14355 7.02792 5.41897 6.37736 5.9698 5.82625C6.52092 5.27542 7.17147 5 7.92147 5H22.5048V7.77792H7.92147V32.2221H32.3656V17.6388H35.1436V32.2221C35.1436 32.9721 34.8681 33.6226 34.3173 34.1737C33.7662 34.7246 33.1156 35 32.3656 35H7.92147ZM10.1436 28.2779H30.1436L24.0602 20.1667L18.8656 27.0279L15.0048 21.9167L10.1436 28.2779ZM28.8381 14.8612V11.3333H25.2823V8.55542H28.8381V5H31.6156V8.55542H35.1436V11.3333H31.6156V14.8612H28.8381Z" fill="#FAFAF8"/>
      )}
    </G>
  </Svg>
);

export default function TabLayout() {
  return (
    <Tabs
      screenOptions={{
        tabBarActiveTintColor: '#54f895',
        tabBarInactiveTintColor: 'white',
        headerShown: false,
        tabBarStyle: {
          backgroundColor: '#1C1C1E',
          borderTopWidth: 3,
          borderTopColor: '#2C2C2E',
          height: 70,
          paddingBottom: 10,
          paddingTop: 10,
        },
      }}
    >
      {/* HOME TAB */}
      <Tabs.Screen
        name="home"
        options={{
          title: '',
          tabBarIcon: ({ focused }) =>
            focused ? (
              <View
                style={{
                width: 46,
                height: 40,
                paddingTop: 8,
                paddingRight: 13,
                paddingBottom: 8,
                paddingLeft: 14,
                justifyContent: 'center',
                alignItems: 'center',
                flexShrink: 0,
                borderRadius: 50,
                backgroundColor: 'rgba(236, 236, 236, 0.20)',
                shadowColor: '#54f895',
                shadowOffset: { width: 0, height: 0 },
                shadowOpacity: 0.8,
                shadowRadius: 10,
              }}
              >
                <ShoeIcon focused={true} size={28} />
              </View>
            ) : (
              <ShoeIcon focused={false} size={28} />
            ),
        }}
      />

      {/* COMMUNITY TAB */}
      <Tabs.Screen
        name="community"
        options={{
          title: '',
          tabBarIcon: ({ focused }) =>
            focused ? (
              <View
                style={{
                width: 46,
                height: 40,
                paddingTop: 8,
                paddingRight: 13,
                paddingBottom: 8,
                paddingLeft: 14,
                justifyContent: 'center',
                alignItems: 'center',
                flexShrink: 0,
                borderRadius: 50,
                backgroundColor: 'rgba(236, 236, 236, 0.20)',
                shadowColor: '#54f895',
                shadowOffset: { width: 0, height: 0 },
                shadowOpacity: 0.8,
                shadowRadius: 10,
                }}
              >
                <PeopleIcon focused={true} size={24} />
              </View>
            ) : (
              <PeopleIcon focused={false} size={24} />
            ),
        }}
      />

      {/* WATERMARK TAB */}
      <Tabs.Screen
        name="watermark"
        options={{
          title: '',
          tabBarIcon: ({ focused }) =>
            focused ? (
              <View
                style={{
                width: 46,
                height: 40,
                paddingTop: 8,
                paddingRight: 13,
                paddingBottom: 8,
                paddingLeft: 14,
                justifyContent: 'center',
                alignItems: 'center',
                flexShrink: 0,
                borderRadius: 50,
                backgroundColor: 'rgba(236, 236, 236, 0.20)',
                shadowColor: '#54f895',
                shadowOffset: { width: 0, height: 0 },
                shadowOpacity: 0.8,
                shadowRadius: 10,
                }}
              >
                <ImageIcon focused={true} size={24} />
              </View>
            ) : (
              <ImageIcon focused={false} size={24} />
            ),
          tabBarLabelStyle: { display: 'none' },
        }}
      />

      {/* PROFILE TAB - keeping Ionicons */}
      <Tabs.Screen
        name="profile"
        options={{
          title: '',
          tabBarIcon: ({ size, focused }) =>
            focused ? (
              <View
                style={{
                width: 46,
                height: 40,
                paddingTop: 8,
                paddingRight: 13,
                paddingBottom: 8,
                paddingLeft: 14,
                justifyContent: 'center',
                alignItems: 'center',
                flexShrink: 0,
                borderRadius: 50,
                backgroundColor: 'rgba(236, 236, 236, 0.20)',
                shadowColor: '#54f895',
                shadowOffset: { width: 0, height: 0 },
                shadowOpacity: 0.8,
                shadowRadius: 10,
                }}
              >
                <Ionicons name="person-circle" size={size || 30} color="#54f895" />
              </View>
            ) : (
              <Ionicons name="person-circle-outline" size={size || 30} color="white" />
            ),
        }}
      />
    </Tabs>
  );
}
